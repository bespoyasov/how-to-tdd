<section id='computer-turn-again'>
  <div class='grid'>
    <div class='text'>
      <h2>
        –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ —Ö–æ–¥—É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
        <a href='#computer-turn-again' class='anchor'>üîó</a>
      </h2>
    </div>
  </div>
  
  <div class='grid'>
    <div class='text'>
      <p>–î–æ–ø—É—Å—Ç–∏–º, —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞—Å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç. –ú–æ–∂–µ–º –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ö–æ–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.</p>
      <p>–ö–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω —Ö–æ–¥–∏—Ç—å –≤ —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–ª–µ—Ç–∫—É. –ù–æ –∫–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å?</p>
      <p>–ú—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ <i>Math.random</i> —Ç–∞–∫, —á—Ç–æ–±—ã –≤–Ω—É—Ç—Ä–∏ —Ç–µ—Å—Ç–∞ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–ª –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –¢–∞–∫–∂–µ –ø–æ–∑–∞–±–æ—Ç–∏–º—Å—è, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ <i>Math.random</i> —Ä–∞–±–æ—Ç–∞–ª –∫–∞–∫ –æ–±—ã—á–Ω–æ.</p>
      <p>–ü–æ–¥–±–µ—Ä—ë–º —Ç–∞–∫–æ–µ —á–∏—Å–ª–æ, —á—Ç–æ–±—ã –∫–æ–º–ø—å—é—Ç–µ—Ä —Ö–æ–¥–∏–ª –≤ —Ü–µ–Ω—Ç—Ä –¥–æ—Å–∫–∏.</p>
      <p>–¢–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–ø—å—é—Ç–µ—Ä —Ö–æ–¥–∏—Ç –≤ –ª–µ–≤—É—é –≤–µ—Ä—Ö–Ω—é—é –∫–ª–µ—Ç–∫—É.</p>
    </div>

    <div class='code'>
<pre data-start='82'><div class='code-filename'>test/game.js</div><code class='language-js line-numbers'>test('Computer moves in randomly chosen cell', () => { 
  const userMoveSymbol = '√ó'
  const computerMoveSymbol = 'o'

  // ...
  const mock = jest.spyOn(global.Math, 'random').mockReturnValue(0.5)

  game.createComputerMove()
  const board = game.getState()

  expect(board[1][1]).toEqual(computerMoveSymbol)
  mock.mockRestore()
})</code></pre>
    </div>
  </div>

  <div class='grid'>
    <div class='text'>
      <p>–¢–∞–∫ –∫–∞–∫ –Ω–∞—à–µ –ø–æ–ª–µ –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä 3&times;3, —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å &ge;0 –∏ &le;2. –ü–∏—à–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º <i>Math.random</i>.</p>
      <p>–ù–æ–≤—ã–π —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç, –Ω–æ –ø–æ—Å—ã–ø–∞–ª–∏—Å—å –¥–≤–∞ –¥—Ä—É–≥–∏—Ö.</p>
      <p>–ü–µ—Ä–≤—ã–π —É–ø–∞–≤—à–∏–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–ª, —á—Ç–æ –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω —Å—Ö–æ–¥–∏—Ç—å –≤ –ª–µ–≤—É—é –≤–µ—Ä—Ö–Ω—é—é –∫–ª–µ—Ç–∫—É. –≠—Ç–æ—Ç —Ç–µ—Å—Ç —É—Å—Ç–∞—Ä–µ–ª, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.</p>
      <p>–í—Ç–æ—Ä–æ–π –∂–µ —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∏–≥—Ä–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ö–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é. –ó–¥–µ—Å—å —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π. –ú—ã –º–æ–∂–µ–º —Ç–∞–∫ –∂–µ –∑–∞–º–µ–Ω–∏—Ç—å <i>Math.random</i> –Ω–∞ —Ñ–∏–∫—Ç–∏–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ —Ç–æ–≥–¥–∞ –∫–ª–µ—Ç–∫–∞ –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ —Ç–∞–∫–æ–π, –∫–æ—Ç–æ—Ä—É—é –º—ã —É–∫–∞–∂–µ–º.</p>
      <p>–õ–∏–±–æ –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ <i>turn</i>, —á—Ç–æ–±—ã –æ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –∏–º–µ–Ω–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.</p>
      <p>–í–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –ø–µ—Ä–≤—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º.</p>
    </div>

    <div class='code'>
<pre data-start='29'><div class='code-filename'>src/Game.js</div><code class='language-diff line-numbers'>  createComputerMove() {
+   const x = Math.floor(Math.random() * (3 - 0))
+   const y = Math.floor(Math.random() * (3 - 0))
+   
-   this._updateHistory(this._computerName, 0, 0)
-   this._updateBoard(0, 0, {
+   this._updateHistory(this._computerName, x, y)
+   this._updateBoard(x, y, {
      symbol: this._computerMoveSymbol
    })
  }</code></pre>

<pre data-start='47'><div class='code-filename'>test/game.js</div><code class='language-diff line-numbers'>- it('Computer moves in top left cell', () => { 
-   game.createComputerMove()
-   const board = game.getState()
- 
-   expect(board[0][0]).toEqual(computerMoveSymbol)
- })
  
  // ...

  it('Game saves computer\'s move in history', () => {
+   const mock = jest.spyOn(global.Math, 'random').mockReturnValue(0.5)

    game.createComputerMove()
    const history = game.getMoveHistory()

-   expect(history).toEqual([{turn: computerName, x: 0, y: 0}])
+   expect(history).toEqual([{turn: computerName, x: 1, y: 1}])
+   mock.mockRestore()
  })</code></pre>
    </div>
  </div>

  <div class='grid'>
    <div class='text'>
      <p>–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—á–Ω—ë–º —Å –≤—ã–Ω–æ—Å–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞.</p>
      <p>–°–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã <i>_getRandomCoordinate</i>. –†–∞–∑–º–µ—Ä –ø–æ–ª—è –≤—ã–Ω–µ—Å–µ–º –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É <i>_fieldSize</i>.</p>
      <p>–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º.</p>
    </div>

    <div class='code'>
<pre data-start='6'><div class='code-filename'>src/Game.js</div><code class='language-diff line-numbers'>  this._computerMoveSymbol = 'o'
+   this._fieldSize = 3
  
  // ...

  createComputerMove() {
-   const x = Math.floor(Math.random() * (3 - 0))
-   const y = Math.floor(Math.random() * (3 - 0))
+   const x = this._getRandomCoordinate()
+   const y = this._getRandomCoordinate()
+
    this._updateHistory(this._computerName, x, y)
  
  // ...

+ _getRandomCoordinate() {
+   return Math.floor(Math.random() * (this._fieldSize - 0))
+ }</code></pre>
    </div>
  </div>
</section>
