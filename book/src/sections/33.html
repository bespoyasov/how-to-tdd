<section id='test-alert'>
  <div class='grid'>
    <div class='text'>
      <h2>
        –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—à–∏–±–∫–∏
        <a href='#test-alert' class='anchor'>üîó</a>
      </h2>
    </div>
  </div>
  <div class='grid'>
    <div class='text'>
      <p>–Ø –ø—Ä–æ–ø—É—â—É —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ <code>init</code> —É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –º–æ–¥–µ–ª–∏ –∏–≥—Ä—ã —Ä–∞–∑–º–µ—Ä –¥–æ—Å–∫–∏ –∏ —Å—Ç—Ä–æ–∏—Ç —Ç–∞–±–ª–∏—Ü—É –ø–æ –Ω–µ–º—É. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ —Ç–µ—Å—Ç—ã —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –µ–º—É, –º–æ–∂–Ω–æ <a href='https://github.com/bespoyasov/ttt-tdd/tree/master/game'>–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≥–∏—Ç—Ö–∞–±–µ</a>.</p>
      <p>–°–µ–π—á–∞—Å –ø–µ—Ä–µ–π–¥—ë–º –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–Ω—É–ª –Ω–∞ –∑–∞–Ω—è—Ç—É—é –∫–ª–µ—Ç–∫—É. –ü—É—Å—Ç—å –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –±—É–¥–µ—Ç –≤—ã—Å–∫–∞–∫–∏–≤–∞—Ç—å <code>alert</code> —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º, —á—Ç–æ –∫–ª–µ—Ç–∫–∞ —É–∂–µ –∑–∞–Ω—è—Ç–∞.</p>
      <p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é <a href='https://gaboesquivel.com/blog/2014/unit-testing-mocks-stubs-and-spies/'>—à–ø–∏–æ–Ω–∞ (spy)</a>, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—ã–∑–æ–≤–∞–º–∏ <code>alert</code>. –ï—Å–ª–∏ <code>alert</code> –±—ã–ª –≤—ã–∑–≤–∞–Ω, —Ç–æ –º–µ—Ç–æ–¥ —à–ø–∏–æ–Ω–∞ <code>toHaveBeenCalled</code> –≤–µ—Ä–Ω—ë—Ç –∏—Å—Ç–∏–Ω—É.</p>
      <p>–¢–∞–∫ –∫–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ <code>try-catch</code> –æ—à–∏–±–∫–∞, –ø–æ–ª—É—á–µ–Ω–Ω–∞—è –æ—Ç <code>acceptUserMove</code> –≤—ã–∑—ã–≤–∞–µ—Ç <code>alert</code> –≤–Ω—É—Ç—Ä–∏ <code>_handleCellClick</code> –∫–ª–∞—Å—Å–∞ <code>DomController</code>. –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–π–¥–µ–Ω.</p>
      <p>–¢–∞–∫–∂–µ —Å—Ä–∞–∑—É –ø–æ–∑–∞–±–æ—Ç–∏–º—Å—è –æ–± –æ—á–∏—Å—Ç–∫–µ —à–ø–∏–æ–Ω–∞. –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–µ–∂–∏–º, –±—É–¥—Ç–æ –µ–≥–æ –Ω–∏ —Ä–∞–∑—É –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∏. –î–ª—è —ç—Ç–æ–≥–æ –±—É–¥–µ–º —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –≤ <code>afterEach</code>. –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∂–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ <code>afterAll</code> –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º –º–µ—Ç–æ–¥ <code>window.alert</code>, –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏–≤ –µ–≥–æ –æ—Ç —à–ø–∏–æ–Ω–∞.</p>
    </div>

    <div class='code'>
<pre data-start='24'><div class='code-filename'>test/dom.js</div><code class='language-js line-numbers'>const createGame = (board) => new Game(board)

// ...

beforeEach(() => {
  window.alert = jest.spyOn(window, 'alert')
})

afterEach(() => {
  // ...

  window.alert.mockReset()
})

afterAll(() => {
  window.alert.mockRestore()
})

// ...

  test('Gets an alert when user makes move in taken cell', () => {
    const game = createGame()
    const domController = createInstance(game)

    domController.init()
    document.querySelector('table td').click()
    document.querySelector('table td').click()

    expect(window.alert).toHaveBeenCalled()
  })</code></pre>
    </div>
  </div>
</section>
